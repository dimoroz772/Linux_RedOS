Развертывание сервера с свободной системой мониторинга статусов разнообразных сервисов компьютерной сети, серверов и сетевого оборудования Zabbix на ОС Linux RedOS Server 7.3.3
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Все описанные ниже действия выполнялись под пользователем root
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Всем привет! Для реализации данного проекта мне потребовалось:
1) Прописать статические IP-адреса;
2) Обновить пакеты ОС Linux RedOS Server 7.3.3 до последней версии;
3) Настроbnm SELinux;
4) Установить и включить Apache + установить дополнительные пакеты Zabbix;
5) Установить и настроить MariaDB + установить дополнительные пакеты Zabbix + настроить PHP;
6) Запустить/настроить/установить Zabbix через Zabbix Web-интерфейс + запустить httpd.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Предисловие:
------------
Nano — это консольный текстовый редактор для UNIX и Unix-подобных операционных систем, основанный на библиотеке curses и распространяемый под лицензией GNU GPL.
------------
SELinux — реализация системы принудительного контроля доступа, которая может работать параллельно с классической избирательной системой контроля доступа.
------------
NMTUI — это инструмент командной строки, который используется для настройки сети в системах Gnu / Linux. При запуске он вызывает графический текстовый 
интерфейс, который помогает пользователям легко и эффективно настраивать сетевые интерфейсы.
------------
Zabbix — это свободная система мониторинга статусов разнообразных сервисов компьютерной сети, серверов и сетевого оборудования.
------------
Apache HTTP-сервер — это свободный веб-сервер.
------------
MariaDB — это ответвление от системы управления базами данных MySQL, разрабатываемое сообществом под лицензией GNU GPL.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
1) Для избежания потери связи с АРМ/VM, нужно позаботиться о статической IP-адресации. Её можно настроить как на самой АРМ/VM, так и на самом сетевом 
устройстве. Статическую адресацию можно прописать с помощью инструмента командной строки nmtui.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
yum install -y NetworkManager-tui |#|#| Установка пакета "nmtui" для настройки сети на АРМ/VM
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Гайд по тому, как пользоваться инструментом nmtui, вы можете посмотреть в интернете.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
2) Обновление пакетов системы.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
yum update -y && yum upgrade -y |#|#| Поиск и обновление пакетов системы
------------
reboot |#|#| Команда для перезагрузки АРМ/VM
--------------------------------------------------------------------------------------------------------------------------------------------------------------
3) Настройка SELinux.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
nano /etc/selinux/config |#|#| Команда для открытия файла "httpd.conf" в текстовом редакторе Nano
------------
Замените строку "SELINUX=enforcing" на "SELINUX=permissive"
------------
setenforce 0 |#|#| Команда для отключения SELinux в текущий момент
------------
setsebool -P httpd_can_network_connect on    |#|#|\
                                             |#|#| ----- Команды прописывания политик для SELinux, чтобы Zabbix правильно функционировал в ОС 
setsebool -P httpd_can_network_connect_db on |#|#|/
--------------------------------------------------------------------------------------------------------------------------------------------------------------
4) Установка и включение Apache + установка дополнительных пакетов Zabbix.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
yum install -y httpd zabbix-apache-conf zabbix-sql-scripts |#|#| Команда установки пакетов "Apache", "zabbix-apache-conf" и "zabbix-sql-scripts"
------------
systemctl enable httpd |#|#| Команда для запуска службы "httpd"
--------------------------------------------------------------------------------------------------------------------------------------------------------------
5) Установка и настройка MariaDB + установка дополнительных пакетов Zabbix + настройка PHP.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
yum install -y mariadb mariadb-server zabbix-server-mysql zabbix-agent |#|#| Команда установки пакетов "mariadb", "mariadb-server", "zabbix-server-mysql" и "zabbix-agent"
------------
systemctl start mariadb |#|#| Команда для запуска службы "MariaDB"
------------
systemctl enable mariadb.service |#|#| Команда для добавления службы "MariaDB" в автозагрузку
------------
mysql_secure_installation |#|#| Команда для выполнения первоначальной настройки MariaDB
------------
План настройки MariaDB:
1. Задайте пароль для MariaDB;
2. Switch to unix_socket authentication [Y/n] n
3. Change the root password? [Y/n] n
4. Remove anonymous users? [Y/n] y
5. Disallow root login remotely? [Y/n] y
6. Remove test database and access to it? [Y/n] y
7. Reload privilege tables now? [Y/n] y
------------
mysql -uroot -pmasterkey |#|#| Команда для подключения к MariaDB
------------
create   database zabbix character set utf8 collate utf8_bin; |#|#| Команда для создания базы данных с названием "zabbix"
------------
grant all privileges on zabbix.* to zabbix@localhost identified by 'password'; |#|#| Команда для задания пароля "password" базам данных "zabbix.*"
------------
quit;
------------
zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql -uzabbix -pzabpassword zabbix |#|#| Команда для распаковки БД
------------
nano /etc/zabbix/zabbix_server.conf |#|#| Данной командой отредактируем текстовый файл "zabbix_server.conf"
------------
Приведите ниже описанные строки в открытом конфигурационном файле "zabbix_server.conf" к следующему виду, после внесённых изменений не забудьте сохраниить конфигурационный файл:

DBHost=localhost
DBName=zabbix
DBUser=zabbix
DBPassword=password
------------
nano /etc/php.ini |#|#| Данной командой отредактируем текстовый файл "php.ini"
------------
Приведите ниже описанные строки в открытом конфигурационном файле "php.ini" к следующему виду, после внесённых изменений не забудьте сохраниить конфигурационный файл:

date.timezone = Asia/Yekaterinburg
post_max_size = 16M
max_execution_time = 300
max_input_time = 300
--------------------------------------------------------------------------------------------------------------------------------------------------------------
6) Запуск/настройка/установка Zabbix через Zabbix Web-интерфейс + запуск httpd.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
systemctl restart httpd |#|#| Команда для перезапуска службы "httpd"
------------
systemctl restart zabbix-server |#|#| Команда для перезапуска службы "zabbix-server"
------------
systemctl restart zabbix-server |#|#| Команда для перезапуска службы "zabbix-server"
------------
systemctl enable zabbix-server |#|#| Команда для добавления службы "zabbix-server" в автозагрузку
------------
systemctl restart zabbix-agent |#|#| Команда для перезапуска службы "zabbix-agent"
------------
systemctl enable zabbix-agent |#|#| Команда для добавления службы "zabbix-agent" в автозагрузку
------------
systemctl restart httpd |#|#| Команда для перезапуска службы "httpd"
------------
1. Открываете браузер и переходите по адресу http://IP-address server-a/Zabbix — откроется страница установки Zabbix Web и нажимаем на кнопку "Next Step"
2. Далее внимательно смотрим на результаты проверки нашего Web-сервера — справа мы должны увидеть все OK. Когда все результаты будут OK, нажимаем на "Next Step"
3. Далее настройки подключения к базе оставляем как есть — дополнительно прописываем пароль, который задали при создании пользователя zabbix (в нашем случае password). После нажимаем "Next Step"
4. Далее в окне оставляем все как есть и нажимаем "Next Step"
5. В последнем окне мы проверяем настройки и нажимаем "Next Step"
6. После завершения установки нажимаем на кнопку "Finish"
7. Для входа в систему используйте следующие учетные данные:
Login: Admin
Password: zabbix
--------------------------------------------------------------------------------------------------------------------------------------------------------------
На этом инструкция закончена! Спасибо за внимание!
