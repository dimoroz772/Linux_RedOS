<head>
  <title>Install Zabbix Server 6.4.9</title>
  <link rel="shortcut icon" href="./logo.png" type="image/png">
</head>
 <head>
  <meta charset="utf-8">
 </head>
<style>
.neonText1 {
  color: #87CEFA;
  text-shadow:
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1;
}
.neonText2 {
  color: #00FF00;
  text-shadow:
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400;
}
/* Additional styling */
body{
    background-color: black;
    background-repeat: no-repeat;
    background-size: cover;
    background-attachment: fixed;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    color: #cfcfcf;
}
a {
    text-decoration: none;
}
p {
  text-indent: 1.5em;
  font-family: monospace;
  font-weight: 500;
  white-space: pre;
  line-height: 2;
  letter-spacing: 1px;
}
</style>
<div class="container">
<p class="neonText1">
Развертывание сервера с свободной системой мониторинга статусов разнообразных сервисов компьютерной сети, серверов и сетевого оборудования Zabbix на ОС Linux RedOS Server 7.3.3
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Все описанные ниже действия выполнялись под пользователем root
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Всем привет! Для реализации данного проекта мне потребовалось:

1) Прописать статические IP-адреса;
2) Обновить пакеты ОС Linux RedOS Server 7.3.3 до последней версии;
3) Настроbnm SELinux;
4) Установить и включить Apache + установить дополнительные пакеты Zabbix;
5) Установить и настроить MariaDB + установить дополнительные пакеты Zabbix + настроить PHP;
6) Запустить/настроить/установить Zabbix через Zabbix Web-интерфейс + запустить httpd.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Предисловие:
------------
Nano — это консольный текстовый редактор для UNIX и Unix-подобных операционных систем, основанный на библиотеке curses и распространяемый под лицензией GNU GPL.
------------
SELinux — реализация системы принудительного контроля доступа, которая может работать параллельно с классической избирательной системой контроля доступа.
------------
NMTUI — это инструмент командной строки, который используется для настройки сети в системах Gnu / Linux. При запуске он вызывает графический текстовый 
интерфейс, который помогает пользователям легко и эффективно настраивать сетевые интерфейсы.
------------
Zabbix — это свободная система мониторинга статусов разнообразных сервисов компьютерной сети, серверов и сетевого оборудования.
------------
Apache HTTP-сервер — это свободный веб-сервер.
------------
MariaDB — это ответвление от системы управления базами данных MySQL, разрабатываемое сообществом под лицензией GNU GPL.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
1) Для избежания потери связи с АРМ/VM, нужно позаботиться о статической IP-адресации. Её можно настроить как на самой АРМ/VM, так и на самом сетевом 
устройстве. Статическую адресацию можно прописать с помощью инструмента командной строки nmtui.
------------
<a class="neonText2">yum install -y NetworkManager-tui</a> |#|#| Установка пакета "nmtui" для настройки сети на АРМ/VM
------------
Гайд по тому, как пользоваться инструментом nmtui, вы можете посмотреть в интернете.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
2) Обновление пакетов системы.
------------
<a class="neonText2">yum update -y && yum upgrade -y</a> |#|#| Поиск и обновление пакетов системы
------------
<a class="neonText2">reboot</a> |#|#| Команда для перезагрузки АРМ/VM
--------------------------------------------------------------------------------------------------------------------------------------------------------------
3) Настройка SELinux.
------------
<a class="neonText2">nano /etc/selinux/config</a> |#|#| Команда для открытия файла "httpd.conf" в текстовом редакторе Nano
------------
Замените строку "SELINUX=enforcing" на "SELINUX=permissive"
------------
<a class="neonText2">setenforce 0</a> |#|#| Команда для отключения SELinux в текущий момент
------------
<a class="neonText2">setsebool -P httpd_can_network_connect on</a>    |#|#|\
                                             |#|#| ----- Команды прописывания политик для SELinux, чтобы Zabbix правильно функционировал в ОС 
<a class="neonText2">setsebool -P httpd_can_network_connect_db on</a> |#|#|/
--------------------------------------------------------------------------------------------------------------------------------------------------------------
4) Установка и включение Apache + установка дополнительных пакетов Zabbix.
------------
<a class="neonText2">yum install -y httpd zabbix-apache-conf zabbix-sql-scripts</a> |#|#| Команда установки пакетов "Apache", "zabbix-apache-conf" и "zabbix-sql-scripts"
------------
<a class="neonText2">systemctl enable httpd</a> |#|#| Команда для запуска службы "httpd"
--------------------------------------------------------------------------------------------------------------------------------------------------------------
5) Установка и настройка MariaDB + установка дополнительных пакетов Zabbix + настройка PHP.
------------
<a class="neonText2">yum install -y mariadb mariadb-server zabbix-server-mysql zabbix-agent</a> |#|#| Команда установки пакетов "mariadb", "mariadb-server", "zabbix-server-mysql"
и "zabbix-agent"
------------
<a class="neonText2">systemctl start mariadb</a> |#|#| Команда для запуска службы "MariaDB"
------------
<a class="neonText2">systemctl enable mariadb.service</a> |#|#| Команда для добавления службы "MariaDB" в автозагрузку
------------
<a class="neonText2">mysql_secure_installation</a> |#|#| Команда для выполнения первоначальной настройки MariaDB
------------
План настройки MariaDB:

1. Задайте пароль для MariaDB;
2. Switch to unix_socket authentication [Y/n] n
3. Change the root password? [Y/n] n
4. Remove anonymous users? [Y/n] y
5. Disallow root login remotely? [Y/n] y
6. Remove test database and access to it? [Y/n] y
7. Reload privilege tables now? [Y/n] y
------------
<a class="neonText2">mysql -uroot -pmasterkey</a> |#|#| Команда для подключения к MariaDB
------------
<a class="neonText2">create   database zabbix character set utf8 collate utf8_bin;</a> |#|#| Команда для создания базы данных с названием "zabbix"
------------
<a class="neonText2">grant all privileges on zabbix.* to zabbix@localhost identified by 'password';</a> |#|#| Команда для задания пароля "password" базам данных "zabbix.*"
------------
<a class="neonText2">quit;</a>
------------
<a class="neonText2">zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql -uzabbix -pzabpassword zabbix</a> |#|#| Команда для распаковки БД
------------
<a class="neonText2">nano /etc/zabbix/zabbix_server.conf</a> |#|#| Данной командой отредактируем текстовый файл "zabbix_server.conf"
------------
Приведите ниже описанные строки в открытом конфигурационном файле "zabbix_server.conf" к следующему виду, после внесённых изменений не забудьте сохраниить
конфигурационный файл:
<a class="neonText2">
DBHost=localhost
DBName=zabbix
DBUser=zabbix
DBPassword=password</a>
------------
<a class="neonText2">nano /etc/php.ini</a> |#|#| Данной командой отредактируем текстовый файл "php.ini"
------------
Приведите ниже описанные строки в открытом конфигурационном файле "php.ini" к следующему виду, после внесённых изменений не забудьте сохраниить
конфигурационный файл:
<a class="neonText2">
date.timezone = Asia/Yekaterinburg
post_max_size = 16M
max_execution_time = 300
max_input_time = 300</a>
--------------------------------------------------------------------------------------------------------------------------------------------------------------
6) Запуск/настройка/установка Zabbix через Zabbix Web-интерфейс + запуск httpd.
------------
<a class="neonText2">systemctl restart httpd</a> |#|#| Команда для перезапуска службы "httpd"
------------
<a class="neonText2">systemctl restart zabbix-server</a> |#|#| Команда для перезапуска службы "zabbix-server"
------------
<a class="neonText2">systemctl restart zabbix-server</a> |#|#| Команда для перезапуска службы "zabbix-server"
------------
<a class="neonText2">systemctl enable zabbix-server</a> |#|#| Команда для добавления службы "zabbix-server" в автозагрузку
------------
<a class="neonText2">systemctl restart zabbix-agent</a> |#|#| Команда для перезапуска службы "zabbix-agent"
------------
<a class="neonText2">systemctl enable zabbix-agent</a> |#|#| Команда для добавления службы "zabbix-agent" в автозагрузку
------------
<a class="neonText2">systemctl restart httpd</a> |#|#| Команда для перезапуска службы "httpd"
------------
1. Открываете браузер и переходите по адресу http://IP-address server-a/Zabbix — откроется страница установки Zabbix Web и нажимаем на кнопку "Next Step"
2. Далее внимательно смотрим на результаты проверки нашего Web-сервера — справа мы должны увидеть все OK. Когда все результаты будут OK, нажимаем на "Next Step"
3. Далее настройки подключения к базе оставляем как есть — дополнительно прописываем пароль, который задали при создании пользователя zabbix (в нашем случае
password). После нажимаем "Next Step"
4. Далее в окне оставляем все как есть и нажимаем "Next Step"
5. В последнем окне мы проверяем настройки и нажимаем "Next Step"
6. После завершения установки нажимаем на кнопку "Finish"
7. Для входа в систему используйте следующие учетные данные:

Login: Admin
Password: zabbix
--------------------------------------------------------------------------------------------------------------------------------------------------------------
На этом инструкция закончена! Спасибо за внимание!
</p>
</div>
